{"uid":"a9dc05c101a35e72","name":"test_build_and_deploy","fullName":"tests.integration.test_node_port#test_build_and_deploy","historyId":"8e5b0ff388919a946524d5696c2557e5","time":{"start":1723515685708,"stop":1723516589286,"duration":903578},"description":"Test the deployment of the charm.","descriptionHtml":"<p>Test the deployment of the charm.</p>\n","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-router-k8s/0 [idle] unknown: \n  mysql-test-app/0 [idle] waiting: \n  data-integrator/0 [idle] blocked: Please relate the data-integrator with the desired product","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1788, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/tests/integration/test_node_port.py\", line 118, in test_build_and_deploy\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2757, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-router-k8s/0 [idle] unknown: \n  mysql-test-app/0 [idle] waiting: \n  data-integrator/0 [idle] blocked: Please relate the data-integrator with the desired product","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1723515685467,"stop":1723515685468,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1723515685468,"stop":1723515685468,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1723515685468,"stop":1723515685707,"duration":239},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1723515685707,"stop":1723515685707,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test the deployment of the charm.","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-router-k8s/0 [idle] unknown: \n  mysql-test-app/0 [idle] waiting: \n  data-integrator/0 [idle] blocked: Please relate the data-integrator with the desired product","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1788, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 152, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 114, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/tests/integration/test_node_port.py\", line 118, in test_build_and_deploy\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-router-k8s-operator/mysql-router-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2757, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-router-k8s/0 [idle] unknown: \n  mysql-test-app/0 [idle] waiting: \n  data-integrator/0 [idle] blocked: Please relate the data-integrator with the desired product","steps":[],"attachments":[{"uid":"bade04032c4267f6","name":"log","source":"bade04032c4267f6.txt","type":"text/plain","size":10757}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1723516589290,"stop":1723516589290,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1723516589299,"stop":1723516595901,"duration":6602},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1723516595901,"stop":1723516595902,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1723516595902,"stop":1723516595902,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1723516595902,"stop":1723516595902,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"@pytest.mark.skipif(False, reason='Skips juju <3.1.x as we have a dependency for self-signed-certificates')"},{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_node_port"},{"name":"host","value":"fv-az1016-590"},{"name":"thread","value":"12253-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_node_port"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"5d4911676f313218","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":16,"skipped":0,"passed":55,"unknown":5,"total":76},"items":[{"uid":"829d672ad93e106a","reportUrl":"../204//#testresult/829d672ad93e106a","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-router-k8s/0 [idle] unknown: \n  mysql-test-app/0 [idle] waiting: \n  data-integrator/0 [idle] blocked: Please relate the data-integrator with the desired product","time":{"start":1723429317683,"stop":1723430221134,"duration":903451}},{"uid":"4ebe6492e72625e6","reportUrl":"../203//#testresult/4ebe6492e72625e6","status":"unknown","time":{}},{"uid":"e0e482ea6a46f722","reportUrl":"../202//#testresult/e0e482ea6a46f722","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] active: \n  mysql-k8s/1 [idle] active: \n  mysql-k8s/2 [idle] active: Primary\n  mysql-router-k8s/0 [idle] unknown: \n  mysql-test-app/0 [idle] waiting: \n  data-integrator/0 [idle] blocked: Please relate the data-integrator with the desired product","time":{"start":1723256355820,"stop":1723257260694,"duration":904874}},{"uid":"5c503bc82fb15167","reportUrl":"../200//#testresult/5c503bc82fb15167","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-router-k8s/0 [idle] unknown: \n  mysql-test-app/0 [idle] waiting: \n  data-integrator/0 [idle] blocked: Please relate the data-integrator with the desired product","time":{"start":1723169858643,"stop":1723170763705,"duration":905062}},{"uid":"d495700899282dbb","reportUrl":"../198//#testresult/d495700899282dbb","status":"unknown","time":{}},{"uid":"1ac1245d055d5c84","reportUrl":"../194//#testresult/1ac1245d055d5c84","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-router-k8s/0 [idle] unknown: \n  mysql-test-app/0 [idle] waiting: \n  data-integrator/0 [idle] blocked: Please relate the data-integrator with the desired product","time":{"start":1722997359148,"stop":1722998263113,"duration":903965}},{"uid":"e3e06051629ab6ed","reportUrl":"../193//#testresult/e3e06051629ab6ed","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] active: Primary\n  mysql-router-k8s/0 [idle] unknown: \n  mysql-test-app/0 [idle] waiting: \n  data-integrator/0 [idle] blocked: Please relate the data-integrator with the desired product","time":{"start":1722910704146,"stop":1722911608062,"duration":903916}},{"uid":"d237ab90a31569bb","reportUrl":"../192//#testresult/d237ab90a31569bb","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] active: Primary\n  mysql-k8s/1 [idle] active: \n  mysql-router-k8s/0 [idle] unknown: \n  mysql-test-app/0 [idle] waiting: \n  data-integrator/0 [idle] blocked: Please relate the data-integrator with the desired product","time":{"start":1722824300662,"stop":1722825204213,"duration":903551}},{"uid":"393487a771a53f83","reportUrl":"../191//#testresult/393487a771a53f83","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] active: \n  mysql-k8s/1 [executing] active: Primary\n  mysql-k8s/2 [idle] active: \n  mysql-router-k8s/0 [idle] unknown: \n  mysql-test-app/0 [idle] waiting: \n  data-integrator/0 [idle] blocked: Please relate the data-integrator with the desired product","time":{"start":1722737829073,"stop":1722738732232,"duration":903159}},{"uid":"b803fb27b0104e8b","reportUrl":"../190//#testresult/b803fb27b0104e8b","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: mysql-k8s/2","time":{"start":1722651122052,"stop":1722651190579,"duration":68527}},{"uid":"8454488a32d86394","reportUrl":"../188//#testresult/8454488a32d86394","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [executing] active: Primary\n  mysql-router-k8s/0 [idle] unknown: \n  mysql-test-app/0 [idle] waiting: \n  data-integrator/0 [idle] blocked: Please relate the data-integrator with the desired product","time":{"start":1722564748600,"stop":1722565652843,"duration":904243}},{"uid":"f66fd75d12bc718b","reportUrl":"../186//#testresult/f66fd75d12bc718b","status":"passed","time":{"start":1722478653163,"stop":1722478879592,"duration":226429}},{"uid":"8684b484a8de8921","reportUrl":"../184//#testresult/8684b484a8de8921","status":"passed","time":{"start":1722390568520,"stop":1722390774692,"duration":206172}},{"uid":"38ebdf903a74c693","reportUrl":"../181//#testresult/38ebdf903a74c693","status":"passed","time":{"start":1722305621021,"stop":1722305851733,"duration":230712}},{"uid":"10d8aaa9589dcd9a","reportUrl":"../177//#testresult/10d8aaa9589dcd9a","status":"passed","time":{"start":1722219215836,"stop":1722219446993,"duration":231157}},{"uid":"c2c547918375dc10","reportUrl":"../176//#testresult/c2c547918375dc10","status":"passed","time":{"start":1722132924719,"stop":1722133177690,"duration":252971}},{"uid":"abec01aa517f8da3","reportUrl":"../175//#testresult/abec01aa517f8da3","status":"passed","time":{"start":1722046105230,"stop":1722046352494,"duration":247264}},{"uid":"60ad9a657a5ed067","reportUrl":"../174//#testresult/60ad9a657a5ed067","status":"passed","time":{"start":1721959823581,"stop":1721960036988,"duration":213407}},{"uid":"70fd22d0fc0c78f4","reportUrl":"../172//#testresult/70fd22d0fc0c78f4","status":"passed","time":{"start":1721787398390,"stop":1721787628236,"duration":229846}},{"uid":"d583492a590a9a2a","reportUrl":"../169//#testresult/d583492a590a9a2a","status":"passed","time":{"start":1721700660028,"stop":1721700882245,"duration":222217}}]},"tags":["asyncio","abort_on_fail","@pytest.mark.skipif(False, reason='Skips juju <3.1.x as we have a dependency for self-signed-certificates')","group(1)"]},"source":"a9dc05c101a35e72.json","parameterValues":[]}